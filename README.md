# ImitaMiller
Spring MVC로 구현한 쇼핑몰 사이트 제작

## 💡 프로젝트 소개
스프링MVC로 구현한 가구 쇼핑몰입니다. 그동안 배웠던 것들을 녹일 수 있는 것은 <br>
쇼핑몰만 한 게 없다고 판단이 되어 주제를 가구 쇼핑몰로 선정했습니다.<br>

#### 🧙진행 기간
* 23.8.14 - 23.9.14<br>
**인원** : 1명

### ⚙️ 개발 환경
- **개발언어** : Java 8, JDK 1.8.0, jstl...
- **라이브러리** : Jquery(Bootstrap5에 포함)
- **프레임워크** : Bootstrap5
- **개발도구** : Eclipse, VS Code
- **웹서버** : Apache Tomcat (v9.0)
- **데이타 베이스** : Oracle DB(11g)

## 💡 주요 기능
- 로그인/회원가입, 마이 페이지 : CRUD 기능
- 상품 메인 : 페이징 및 검색 처리
- 상품 상세 페이지 : 조회수

## 💡 DB 설계(ERD)
![image](https://github.com/RedNine97/ImitaMiller/assets/117744969/90ce5dcc-9b3d-49c3-ad7b-cc681551802c)

### DB축소
![image](https://github.com/RedNine97/ImitaMiller/assets/117744969/bf518709-5558-46e3-87a3-561f382ca5a4)

## 💡 개발 내용
**밸로그 링크** <br>
[DB, 환경설정, 상품](https://velog.io/@ghdrn221/%EC%8A%A4%ED%94%84%EB%A7%81MVC-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8)<br>
[DB 테이블 수정](https://velog.io/@ghdrn221/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85)<br>
[로그인 / 로그아웃](https://velog.io/@ghdrn221/%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EB%A1%9C%EA%B7%B8%EC%95%84%EC%9B%83)<br>
[회원가입](https://velog.io/@ghdrn221/%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85)<br>
[마이페이지](https://velog.io/@ghdrn221/%EB%A7%88%EC%9D%B4%ED%8E%98%EC%9D%B4%EC%A7%80)<br>
[아이디, 비밀번호 찾기](https://velog.io/@ghdrn221/%EC%95%84%EC%9D%B4%EB%94%94-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%B0%BE%EA%B8%B0)<br>
[관리자(상품수정까지)](https://velog.io/@ghdrn221/%EA%B4%80%EB%A6%AC%EC%9E%90)<br>
[상품 첨부파일(등록, 수정, 삭제)](https://velog.io/@ghdrn221/%EC%83%81%ED%92%88-%EC%B2%A8%EB%B6%80%ED%8C%8C%EC%9D%BC%EB%93%B1%EB%A1%9D-%EC%88%98%EC%A0%95-%EC%82%AD%EC%A0%9C)<br>
[에러처리 / Spring Security](https://velog.io/@ghdrn221/%EC%97%90%EB%9F%AC%EC%B2%98%EB%A6%AC-Spring-Security)<br>
[마무리 (DB, 느낀점)](https://velog.io/@ghdrn221/%EB%A7%88%EB%AC%B4%EB%A6%AC-DB-%EB%8A%90%EB%82%80%EC%A0%90)<br>

## 💡 비즈니스 로직
가구 쇼핑몰 사이트인 이미타밀러 개인 프로젝트에 비즈니스 로직에 대해 설명하겠습니다. 먼저, 서버는 Apache Tomcat 9.0버전을 사용하였고, DB는 Oracle11g 를 사용했습니다. 화면구현은 HTML5, CSS3, JavaScript 언어를 사용하였으며, Bootstrap5 프레임워크를 이용하여 구현했습니다. 기능개발은 Java 언어로 JSP를 사용하여 Spring MVC 구조로 기능을 구현했습니다. 제가 구현한 화면구현 및 기능 개발 부분은 메인페이지, 로그인 및 회원가입, 로그아웃, 아이디 찾기 및 비밀번호 찾기, 상품, 마이페이지, 관리자 페이지 기능을 개발했습니다. 보안은 Spring Security 4.2.15RELLEASE 버전을 사용했습니다.

메인페이지는 사용자가 사이트에 접속했을 때 가장 먼저 보이는 페이지로 이벤트 배너와 베스트 상품 및 추천 상품 목록을 데이터베이스에서 조회하여 표시합니다. 상품은 규칙적인 랜덤을 방지하여 랜덤 객체를 생성하고 베스트 상품은 8개, 추천상품은 상품의 종류 별로 4개 씩을 표시합니다.

로그인은 사용자가 아이디와 비밀번호를 입력하여 로그인하는 기능입니다. 사용자가 아이디와 비밀번호를 입력하면 유효성검사와 함께 DB에 있는 아이디와 입력 받은 아이디로 일반 회원인지 관리자인지를 검사한 후에 Spring Security가 제공하는 비밀번호 암호화를 통해 해시 함수로 암호화된 비밀번호 와도 일치한다면 세션에 저장하여  header에 Spring Security에서 제공하는 CSRF보호 기능을 이용한 CSRF토큰과 로그인 아이디 및 로그인 체크 값을 전달합니다. 인증이 실패하는 경우에는 오류 페이지로 이동하여 사용자에게 알려줍니다.

회원가입은 사용자가 필요한 정보를 입력하여 새로운 회원으로 가입하는 기능입니다. 사용자가 입력한 정보의 유효성을 검사합니다. 또한,  DB에 조회하여 중복 ID를 체크하고 우편번호와 주소를 불러오거나 직접 작성하여 값을 입력합니다. 이때 비밀번호는 해시 함수로 암호화하여 DB에 저장됩니다. 유효성 검사를 통과하면 회원 정보를 DB에 저장하고 로그인 페이지로 이동합니다. 회원가입을 실패 할 경우 에러페이지로 이동합니다.

로그아웃은 사용자가 로그아웃 버튼을 클릭하면 로그아웃 할 것인지 확인하는 메시지가 뜨고 확인을 누르면 현재 세션을 종료하고 세션 정보를 삭제합니다. 세션 종료 후에는 로그아웃 상태가 되어 로그인이 필요한 기능에 접근 할 수 없습니다.

아이디 찾기는 사용자가 등록한 이메일과 이름을 이용하여 아이디를 찾는 기능으로 회원 정보를 DB에서 조회하여 입력 받은 값과 일치하고 사용자 메일로 발송된 랜덤 인증코드가 일치하면 해당 회원의 아이디를 모두 표시합니다. 일치하는 회원 정보가 없거나 입력 받은 값이 다르다면 오류 메시지를 표시합니다.

비밀번호 찾기는 사용자가 등록한 아이디와 이메일 및 이름을 입력하여 비밀번호를 재설정하는 기능입니다. 사용자가 아이디를 입력하면 DB에서 회원과 관리자 테이블에서 중복되는 아이디인지 확인하고 틀리면 에러 메시지 맞으면 이름 및 이메일 주소를 입력 받고 사용자 메일로 발송된 랜덤 인증코드까지 일치하면 새로운 비밀번호를 입력 받아 회원의 비밀번호를 업데이트합니다.

상품에는 상품 검색 및 필터링, 상품 목록, 상품 상세 정보를 표시하며, 관리자로 로그인 할 경우 상품을 등록하거나 수정 및 삭제할 수도 있습니다. 상품 필터링을 구현하여 사용자가 상품 목록에서 다양한 상품들의 추천순, 낮은 가격순, 높은 가격순 별로 목록을 볼 수 있고, 상품 목록에서 특정 상품을 선택하면 해당 상품의 상세 정보를 표시합니다. 또한, 랜덤으로 19개의  다른 상품의 목록도 볼 수 있습니다. 상품 검색 기능을 구현하여 사용자는 검색창에 키워드를 입력하여 상품을 검색할 수 있습니다. 검색 결과는 DB에서 조회하여 사용자에게 표시됩니다.

마이페이지는 사용자가 회원 정보를 조회 및 수정하거나 회원 탈퇴할 수 있습니다. 회원 정보는 DB에서 회원 정보를 조회하여 표시되고 유효성 검사를 통해 수정할 수도 있습니다. 회원 탈퇴는 DB에서 조회한 비밀번호와 입력 받은 비밀번호가 일치한다면 세션에 데이터와 DB의 정보를 삭제하여 회원 탈퇴 됩니다.

관리자로 로그인할 경우에는 마이페이지 대신 관리자 페이지가 표시되어 관리자 정보, 제품 정보, 배송 정보를 확인할 수 있습니다. 관리자 정보의 더보기 버튼을 클릭하면 관리자가 상품을 직접 추가하거나 상품의 이미지나 정보 등을 수정 및 삭제하는 페이지로 이동합니다.

## 💡 이전 프로젝트
[모델2로 구현한 프로젝트 밸로그 링크](https://velog.io/@ghdrn221/series/%EB%AA%A8%EB%8D%B82%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8)<br>

## 💡 느낀점
처음에 너무 많은 범위를 혼자 하려고 했던 것 같습니다. 그리고, Spring Security를 적용(권한) 해서 로그인 처리하고, Tiles와 Mybatis로 구현한 게시판 프로젝트가 있어서 이걸 참고 해서 구현했다면 하는 아쉬움도 남습니다. 한달정도 걸렸지만 처음에는 거의 SpringMVC, Tiles,  Spring Security, 어노테이션을 다시 익히는 데에 시간을 보냈습니다. 또, 자바스크립트에 많이 막혀서 막상 시작하고 끝낸 기간은 일주일 조금 넘는 것 같아서 더 아쉬움이 남는 것 같습니다.
